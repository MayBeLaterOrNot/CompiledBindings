<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="clr-namespace:WPFTest"
      xmlns:m="http://compiledbindings.com"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:mx="http://compiledbindings.com/x"
      xmlns:viewModels="using:WPFTest.ViewModels"
      xmlns:views="clr-namespace:WPFTest.Views"
      mc:Ignorable="d mx"
      x:Class="WPFTest.Views.Page1"
      mx:DataType="viewModels:Page1ViewModel"
      m:Title="{x:Set local:Strings.Instance.Title}">

  <Page.Resources>
    <BooleanToVisibilityConverter x:Key="TrueToVisibleConverter" />
    <views:InverseBooleanConverter x:Key="InverseBooleanConverter" />

    <DataTemplate x:Key="test1Template" DataType="viewModels:EntityViewModel">
      <Grid>
        <TextBlock Text="{x:Bind Model.SByteProp}" />
        <TextBlock Text="{x:Bind BooleanProp}" />
        <TextBlock IsEnabled="{x:Bind BooleanProp, Converter={StaticResource InverseBooleanConverter}}" />
      </Grid>
    </DataTemplate>
  </Page.Resources>

  <StackPanel>
    <Image Source="{x:Set LoadImageAsync()}"/>
    <TextBlock mx:DataType="{x:Null}" m:Text="{x:Bind _viewModel.DecimalProp}" />
    <TextBlock Name="header1"
               m:Text="{x:Set local:Strings.Instance.Header1}"
               m:Visibility="{x:Bind BooleanProp ? Visible : Collapsed}" />
    <TextBlock Visibility="{x:Bind Converter={StaticResource TrueToVisibleConverter}, Path=BooleanProp}" m:Text="{x:Bind DecimalProp}" />
    <TextBlock m:Text="{x:Bind DecimalProp + 1}" />
    <TextBox m:Text="{x:Bind OrderInput, Mode=TwoWay}" />
    <CheckBox m:IsChecked="{x:Bind BoolInput, Mode=TwoWay, Converter={StaticResource InverseBooleanConverter}, ConverterParameter=ArrayProp.Length > 0}" />
    <ListView x:Name="listView"
              ItemTemplate="{StaticResource test1Template}"
              ItemsSource="{x:Bind ListProp}"
              m:SetVisible="{x:Bind ArrayProp.Length > 0}" />
    <Button IsEnabled="{x:Bind listView.SelectedItem ne null, DataType={x:Null}}"/>
    <TextBlock Text="{x:Bind ModifyViewModel.Input1, FallbackValue='abc'}" />
    <TextBlock Text="{x:Bind ModifyViewModel.Input1, TargetNullValue='aaa'}" />
    <TextBlock Text="{x:Bind TaskProp, FallbackValue='Loading...'}" />
    <Image Source="{x:Bind LoadImageAsync()}" />
  </StackPanel>

</Page>